(function(){"use strict";(function(exports){const globalObj={_nHtml:[],_oHtml:[],_el:null,_data:null,_template:null,_sourceTemplate:null,onceSetTemplate:null};function createView(e){globalObj._data=e.data,globalObj._template=e.template,globalObj._sourceTemplate=e.template,globalObj._el=e.el,document.querySelector(e.el).insertAdjacentHTML("beforeEnd",render(globalObj._template))}function eventListener(e,t,l){document.querySelector(e).addEventListener(t,l)}function ref(){return new Proxy(globalObj._data,{get:(e,t)=>e[t],set:(e,t,l)=>(e[t]=l,setTemplate(),!0)})}globalObj.onceSetTemplate=once(setTemplate);const reactiveHandlers={get:(e,t)=>"object"==typeof e[t]&&null!==e[t]?new Proxy(e[t],reactiveHandlers):Reflect.get(e,t),set:(e,t,l)=>(Reflect.set(e,t,l),globalObj.onceSetTemplate(),!0)};function reactive(){return new Proxy(globalObj._data,reactiveHandlers)}function setTemplate(){const e=document.querySelector(globalObj._el),t=toHtml(render(globalObj._sourceTemplate,!0));if(compile(e,"o"),compile(t,"n"),globalObj._oHtml.length===globalObj._nHtml.length)for(let e=0;e<globalObj._oHtml.length;e++){const t=globalObj._oHtml[e];t.textContent!==globalObj._nHtml[e].textContent&&(t.textContent=globalObj._nHtml[e].textContent)}}function isTextNode(e){return 3===e.nodeType}function compile(e,t){const l=e.childNodes;for(let e=0;e<Array.from(l).length;e++){const o=Array.from(l)[e];o.childNodes&&o.childNodes.length?compile(o,t):isTextNode(o)&&0!==o.textContent.trim().length&&("o"===t?globalObj._oHtml.push(o):globalObj._nHtml.push(o))}}function toHtml(e){return(new DOMParser).parseFromString(e,"text/html")}function getType(e){return Object.prototype.toString.call(e).match(/\[object (.+?)\]/)[1].toLowerCase()}function once(e){let t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function render(template,type){const reg=/\{(.+?)\}/;if(reg.test(template)){const key=reg.exec(template)[1];return template=globalObj._data.hasOwnProperty(key)?template.replace(reg,globalObj._data[key]):template.replace(reg,eval(`globalObj._data.${key}`)),type?render(template,!0):render(template)}return template}exports.createView=createView,exports.eventListener=eventListener,exports.getType=getType,exports.reactive=reactive,exports.ref=ref,Object.defineProperty(exports,"__esModule",{value:!0})})({})})();
